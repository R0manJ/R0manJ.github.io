<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh_cn">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="R0hman の 实验室">
<meta property="og:url" content="http://github.com/r0manj/page/8/index.html">
<meta property="og:site_name" content="R0hman の 实验室">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Rohman.Zhu">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://github.com/r0manj/page/8/"/>





  <title>R0hman の 实验室</title>
  








<meta name="generator" content="Hexo 4.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh_cn">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>
	<a href="https://github.com/r0manj" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#70B7FD; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">R0hman の 实验室</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-list"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-schedule">
          <a href="/schedule/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br />
            
            Schedule
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://github.com/r0manj/2018/11/23/httpd-conf/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rohman.Zhu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="R0hman の 实验室">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/23/httpd-conf/" itemprop="url">httpd.conf</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-23T00:11:57+08:00">
                2018-11-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br></pre></td><td class="code"><pre><span class="line">#</span><br><span class="line"># This is the main Apache HTTP server configuration file.  It contains the</span><br><span class="line"># configuration directives that give the server its instructions.</span><br><span class="line"># See &lt;URL:http:&#x2F;&#x2F;httpd.apache.org&#x2F;docs&#x2F;2.2&gt; for detailed information.</span><br><span class="line"># In particular, see </span><br><span class="line"># &lt;URL:http:&#x2F;&#x2F;httpd.apache.org&#x2F;docs&#x2F;2.2&#x2F;mod&#x2F;directives.html&gt;</span><br><span class="line"># for a discussion of each configuration directive.</span><br><span class="line">#</span><br><span class="line"># Do NOT simply read the instructions in here without understanding</span><br><span class="line"># what they do.  They&#39;re here only as hints or reminders.  If you are unsure</span><br><span class="line"># consult the online docs. You have been warned.  </span><br><span class="line">#</span><br><span class="line"># Configuration and logfile names: If the filenames you specify for many</span><br><span class="line"># of the server&#39;s control files begin with &quot;&#x2F;&quot; (or &quot;drive:&#x2F;&quot; for Win32), the</span><br><span class="line"># server will use that explicit path.  If the filenames do *not* begin</span><br><span class="line"># with &quot;&#x2F;&quot;, the value of ServerRoot is prepended -- so &#39;log&#x2F;access_log&#39;</span><br><span class="line"># with ServerRoot set to &#39;&#x2F;www&#39; will be interpreted by the</span><br><span class="line"># server as &#39;&#x2F;www&#x2F;log&#x2F;access_log&#39;, where as &#39;&#x2F;log&#x2F;access_log&#39; will be</span><br><span class="line"># interpreted as &#39;&#x2F;log&#x2F;access_log&#39;.</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># ServerRoot: The top of the directory tree under which the server&#39;s</span><br><span class="line"># configuration, error, and log files are kept.</span><br><span class="line">#</span><br><span class="line"># Do not add a slash at the end of the directory path.  If you point</span><br><span class="line"># ServerRoot at a non-local disk, be sure to point the LockFile directive</span><br><span class="line"># at a local disk.  If you wish to share the same ServerRoot for multiple</span><br><span class="line"># httpd daemons, you will need to change at least LockFile and PidFile.</span><br><span class="line">#</span><br><span class="line">ServerRoot &quot;&#x2F;usr&#x2F;local&#x2F;httpd-2.2.24&#x2F;&quot;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># Listen: Allows you to bind Apache to specific IP addresses and&#x2F;or</span><br><span class="line"># ports, instead of the default. See also the &lt;VirtualHost&gt;</span><br><span class="line"># directive.</span><br><span class="line">#</span><br><span class="line"># Change this to Listen on specific IP addresses as shown below to </span><br><span class="line"># prevent Apache from glomming onto all bound IP addresses.</span><br><span class="line">#</span><br><span class="line">#Listen 12.34.56.78:80</span><br><span class="line">Listen 80</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># Dynamic Shared Object (DSO) Support</span><br><span class="line">#</span><br><span class="line"># To be able to use the functionality of a module which was built as a DSO you</span><br><span class="line"># have to place corresponding &#96;LoadModule&#39; lines at this location so the</span><br><span class="line"># directives contained in it are actually available _before_ they are used.</span><br><span class="line"># Statically compiled modules (those listed by &#96;httpd -l&#39;) do not need</span><br><span class="line"># to be loaded here.</span><br><span class="line">#</span><br><span class="line"># Example:</span><br><span class="line"># LoadModule foo_module modules&#x2F;mod_foo.so</span><br><span class="line">#</span><br><span class="line">LoadModule authn_file_module modules&#x2F;mod_authn_file.so</span><br><span class="line">LoadModule authn_dbm_module modules&#x2F;mod_authn_dbm.so</span><br><span class="line">LoadModule authn_anon_module modules&#x2F;mod_authn_anon.so</span><br><span class="line">LoadModule authn_dbd_module modules&#x2F;mod_authn_dbd.so</span><br><span class="line">LoadModule authn_default_module modules&#x2F;mod_authn_default.so</span><br><span class="line">LoadModule authz_host_module modules&#x2F;mod_authz_host.so</span><br><span class="line">LoadModule authz_groupfile_module modules&#x2F;mod_authz_groupfile.so</span><br><span class="line">LoadModule authz_user_module modules&#x2F;mod_authz_user.so</span><br><span class="line">LoadModule authz_dbm_module modules&#x2F;mod_authz_dbm.so</span><br><span class="line">LoadModule authz_owner_module modules&#x2F;mod_authz_owner.so</span><br><span class="line">LoadModule authz_default_module modules&#x2F;mod_authz_default.so</span><br><span class="line">LoadModule auth_basic_module modules&#x2F;mod_auth_basic.so</span><br><span class="line">LoadModule auth_digest_module modules&#x2F;mod_auth_digest.so</span><br><span class="line">LoadModule dbd_module modules&#x2F;mod_dbd.so</span><br><span class="line">LoadModule dumpio_module modules&#x2F;mod_dumpio.so</span><br><span class="line">LoadModule reqtimeout_module modules&#x2F;mod_reqtimeout.so</span><br><span class="line">LoadModule ext_filter_module modules&#x2F;mod_ext_filter.so</span><br><span class="line">LoadModule include_module modules&#x2F;mod_include.so</span><br><span class="line">LoadModule filter_module modules&#x2F;mod_filter.so</span><br><span class="line">LoadModule substitute_module modules&#x2F;mod_substitute.so</span><br><span class="line">LoadModule deflate_module modules&#x2F;mod_deflate.so</span><br><span class="line">LoadModule log_config_module modules&#x2F;mod_log_config.so</span><br><span class="line">LoadModule logio_module modules&#x2F;mod_logio.so</span><br><span class="line">LoadModule env_module modules&#x2F;mod_env.so</span><br><span class="line">LoadModule expires_module modules&#x2F;mod_expires.so</span><br><span class="line">LoadModule headers_module modules&#x2F;mod_headers.so</span><br><span class="line">LoadModule ident_module modules&#x2F;mod_ident.so</span><br><span class="line">LoadModule setenvif_module modules&#x2F;mod_setenvif.so</span><br><span class="line">LoadModule version_module modules&#x2F;mod_version.so</span><br><span class="line">LoadModule ssl_module modules&#x2F;mod_ssl.so</span><br><span class="line">LoadModule mime_module modules&#x2F;mod_mime.so</span><br><span class="line">LoadModule dav_module modules&#x2F;mod_dav.so</span><br><span class="line">LoadModule status_module modules&#x2F;mod_status.so</span><br><span class="line">LoadModule autoindex_module modules&#x2F;mod_autoindex.so</span><br><span class="line">LoadModule asis_module modules&#x2F;mod_asis.so</span><br><span class="line">LoadModule info_module modules&#x2F;mod_info.so</span><br><span class="line">LoadModule cgi_module modules&#x2F;mod_cgi.so</span><br><span class="line">LoadModule cgid_module modules&#x2F;mod_cgid.so</span><br><span class="line">LoadModule dav_fs_module modules&#x2F;mod_dav_fs.so</span><br><span class="line">LoadModule vhost_alias_module modules&#x2F;mod_vhost_alias.so</span><br><span class="line">LoadModule negotiation_module modules&#x2F;mod_negotiation.so</span><br><span class="line">LoadModule dir_module modules&#x2F;mod_dir.so</span><br><span class="line">LoadModule imagemap_module modules&#x2F;mod_imagemap.so</span><br><span class="line">LoadModule actions_module modules&#x2F;mod_actions.so</span><br><span class="line">LoadModule speling_module modules&#x2F;mod_speling.so</span><br><span class="line">LoadModule userdir_module modules&#x2F;mod_userdir.so</span><br><span class="line">LoadModule alias_module modules&#x2F;mod_alias.so</span><br><span class="line">LoadModule rewrite_module modules&#x2F;mod_rewrite.so</span><br><span class="line"></span><br><span class="line">&lt;IfModule !mpm_netware_module&gt;</span><br><span class="line">&lt;IfModule !mpm_winnt_module&gt;</span><br><span class="line">#</span><br><span class="line"># If you wish httpd to run as a different user or group, you must run</span><br><span class="line"># httpd as root initially and it will switch.  </span><br><span class="line">#</span><br><span class="line"># User&#x2F;Group: The name (or #number) of the user&#x2F;group to run httpd as.</span><br><span class="line"># It is usually good practice to create a dedicated user and group for</span><br><span class="line"># running httpd, as with most system services.</span><br><span class="line">#</span><br><span class="line">User daemon</span><br><span class="line">Group daemon</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;IfModule&gt;</span><br><span class="line">&lt;&#x2F;IfModule&gt;</span><br><span class="line"></span><br><span class="line"># &#39;Main&#39; server configuration</span><br><span class="line">#</span><br><span class="line"># The directives in this section set up the values used by the &#39;main&#39;</span><br><span class="line"># server, which responds to any requests that aren&#39;t handled by a</span><br><span class="line"># &lt;VirtualHost&gt; definition.  These values also provide defaults for</span><br><span class="line"># any &lt;VirtualHost&gt; containers you may define later in the file.</span><br><span class="line">#</span><br><span class="line"># All of these directives may appear inside &lt;VirtualHost&gt; containers,</span><br><span class="line"># in which case these default settings will be overridden for the</span><br><span class="line"># virtual host being defined.</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># ServerAdmin: Your address, where problems with the server should be</span><br><span class="line"># e-mailed.  This address appears on some server-generated pages, such</span><br><span class="line"># as error documents.  e.g. admin@your-domain.com</span><br><span class="line">#</span><br><span class="line">ServerAdmin you@example.com</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># ServerName gives the name and port that the server uses to identify itself.</span><br><span class="line"># This can often be determined automatically, but we recommend you specify</span><br><span class="line"># it explicitly to prevent problems during startup.</span><br><span class="line">#</span><br><span class="line"># If your host doesn&#39;t have a registered DNS name, enter its IP address here.</span><br><span class="line">#</span><br><span class="line">#ServerName www.example.com:80</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># DocumentRoot: The directory out of which you will serve your</span><br><span class="line"># documents. By default, all requests are taken from this directory, but</span><br><span class="line"># symbolic links and aliases may be used to point to other locations.</span><br><span class="line">#</span><br><span class="line">DocumentRoot &quot;&#x2F;usr&#x2F;local&#x2F;httpd-2.2.24&#x2F;&#x2F;htdocs&quot;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># Each directory to which Apache has access can be configured with respect</span><br><span class="line"># to which services and features are allowed and&#x2F;or disabled in that</span><br><span class="line"># directory (and its subdirectories). </span><br><span class="line">#</span><br><span class="line"># First, we configure the &quot;default&quot; to be a very restrictive set of </span><br><span class="line"># features.  </span><br><span class="line">#</span><br><span class="line">&lt;Directory &quot;&#x2F;var&#x2F;www&#x2F;html&#x2F;&quot;&gt;</span><br><span class="line">    Options Indexes FollowSymLinks</span><br><span class="line">    AllowOverride None</span><br><span class="line">    Order deny,allow</span><br><span class="line">    Deny from all</span><br><span class="line">&lt;&#x2F;Directory&gt;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># Note that from this point forward you must specifically allow</span><br><span class="line"># particular features to be enabled - so if something&#39;s not working as</span><br><span class="line"># you might expect, make sure that you have specifically enabled it</span><br><span class="line"># below.</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># This should be changed to whatever you set DocumentRoot to.</span><br><span class="line">#</span><br><span class="line">&lt;Directory &quot;&#x2F;usr&#x2F;local&#x2F;httpd-2.2.24&#x2F;&#x2F;htdocs&quot;&gt;</span><br><span class="line">    #</span><br><span class="line">    # Possible values for the Options directive are &quot;None&quot;, &quot;All&quot;,</span><br><span class="line">    # or any combination of:</span><br><span class="line">    #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews</span><br><span class="line">    #</span><br><span class="line">    # Note that &quot;MultiViews&quot; must be named *explicitly* --- &quot;Options All&quot;</span><br><span class="line">    # doesn&#39;t give it to you.</span><br><span class="line">    #</span><br><span class="line">    # The Options directive is both complicated and important.  Please see</span><br><span class="line">    # http:&#x2F;&#x2F;httpd.apache.org&#x2F;docs&#x2F;2.2&#x2F;mod&#x2F;core.html#options</span><br><span class="line">    # for more information.</span><br><span class="line">    #</span><br><span class="line">    Options Indexes FollowSymLinks</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # AllowOverride controls what directives may be placed in .htaccess files.</span><br><span class="line">    # It can be &quot;All&quot;, &quot;None&quot;, or any combination of the keywords:</span><br><span class="line">    #   Options FileInfo AuthConfig Limit</span><br><span class="line">    #</span><br><span class="line">    AllowOverride None</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # Controls who can get stuff from this server.</span><br><span class="line">    #</span><br><span class="line">    Order allow,deny</span><br><span class="line">    Allow from all</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;Directory&gt;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># DirectoryIndex: sets the file that Apache will serve if a directory</span><br><span class="line"># is requested.</span><br><span class="line">#</span><br><span class="line">&lt;IfModule dir_module&gt;</span><br><span class="line">    DirectoryIndex index.html</span><br><span class="line">&lt;&#x2F;IfModule&gt;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># The following lines prevent .htaccess and .htpasswd files from being </span><br><span class="line"># viewed by Web clients. </span><br><span class="line">#</span><br><span class="line">&lt;FilesMatch &quot;^\.ht&quot;&gt;</span><br><span class="line">    Order allow,deny</span><br><span class="line">    Deny from all</span><br><span class="line">    Satisfy All</span><br><span class="line">&lt;&#x2F;FilesMatch&gt;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># ErrorLog: The location of the error log file.</span><br><span class="line"># If you do not specify an ErrorLog directive within a &lt;VirtualHost&gt;</span><br><span class="line"># container, error messages relating to that virtual host will be</span><br><span class="line"># logged here.  If you *do* define an error logfile for a &lt;VirtualHost&gt;</span><br><span class="line"># container, that host&#39;s errors will be logged there and not here.</span><br><span class="line">#</span><br><span class="line">ErrorLog &quot;logs&#x2F;error_log&quot;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># LogLevel: Control the number of messages logged to the error_log.</span><br><span class="line"># Possible values include: debug, info, notice, warn, error, crit,</span><br><span class="line"># alert, emerg.</span><br><span class="line">#</span><br><span class="line">LogLevel warn</span><br><span class="line"></span><br><span class="line">&lt;IfModule log_config_module&gt;</span><br><span class="line">    #</span><br><span class="line">    # The following directives define some format nicknames for use with</span><br><span class="line">    # a CustomLog directive (see below).</span><br><span class="line">    #</span><br><span class="line">    LogFormat &quot;%h %l %u %t \&quot;%r\&quot; %&gt;s %b \&quot;%&#123;Referer&#125;i\&quot; \&quot;%&#123;User-Agent&#125;i\&quot;&quot; combined</span><br><span class="line">    LogFormat &quot;%h %l %u %t \&quot;%r\&quot; %&gt;s %b&quot; common</span><br><span class="line"></span><br><span class="line">    &lt;IfModule logio_module&gt;</span><br><span class="line">      # You need to enable mod_logio.c to use %I and %O</span><br><span class="line">      LogFormat &quot;%h %l %u %t \&quot;%r\&quot; %&gt;s %b \&quot;%&#123;Referer&#125;i\&quot; \&quot;%&#123;User-Agent&#125;i\&quot; %I %O&quot; combinedio</span><br><span class="line">    &lt;&#x2F;IfModule&gt;</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # The location and format of the access logfile (Common Logfile Format).</span><br><span class="line">    # If you do not define any access logfiles within a &lt;VirtualHost&gt;</span><br><span class="line">    # container, they will be logged here.  Contrariwise, if you *do*</span><br><span class="line">    # define per-&lt;VirtualHost&gt; access logfiles, transactions will be</span><br><span class="line">    # logged therein and *not* in this file.</span><br><span class="line">    #</span><br><span class="line">    CustomLog &quot;logs&#x2F;access_log&quot; common</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # If you prefer a logfile with access, agent, and referer information</span><br><span class="line">    # (Combined Logfile Format) you can use the following directive.</span><br><span class="line">    #</span><br><span class="line">    #CustomLog &quot;logs&#x2F;access_log&quot; combined</span><br><span class="line">&lt;&#x2F;IfModule&gt;</span><br><span class="line"></span><br><span class="line">&lt;IfModule alias_module&gt;</span><br><span class="line">    #</span><br><span class="line">    # Redirect: Allows you to tell clients about documents that used to </span><br><span class="line">    # exist in your server&#39;s namespace, but do not anymore. The client </span><br><span class="line">    # will make a new request for the document at its new location.</span><br><span class="line">    # Example:</span><br><span class="line">    # Redirect permanent &#x2F;foo http:&#x2F;&#x2F;www.example.com&#x2F;bar</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # Alias: Maps web paths into filesystem paths and is used to</span><br><span class="line">    # access content that does not live under the DocumentRoot.</span><br><span class="line">    # Example:</span><br><span class="line">    # Alias &#x2F;webpath &#x2F;full&#x2F;filesystem&#x2F;path</span><br><span class="line">    #</span><br><span class="line">    # If you include a trailing &#x2F; on &#x2F;webpath then the server will</span><br><span class="line">    # require it to be present in the URL.  You will also likely</span><br><span class="line">    # need to provide a &lt;Directory&gt; section to allow access to</span><br><span class="line">    # the filesystem path.</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # ScriptAlias: This controls which directories contain server scripts. </span><br><span class="line">    # ScriptAliases are essentially the same as Aliases, except that</span><br><span class="line">    # documents in the target directory are treated as applications and</span><br><span class="line">    # run by the server when requested rather than as documents sent to the</span><br><span class="line">    # client.  The same rules about trailing &quot;&#x2F;&quot; apply to ScriptAlias</span><br><span class="line">    # directives as to Alias.</span><br><span class="line">    #</span><br><span class="line">    ScriptAlias &#x2F;cgi-bin&#x2F; &quot;&#x2F;usr&#x2F;local&#x2F;httpd-2.2.24&#x2F;&#x2F;cgi-bin&#x2F;&quot;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;IfModule&gt;</span><br><span class="line"></span><br><span class="line">&lt;IfModule cgid_module&gt;</span><br><span class="line">    #</span><br><span class="line">    # ScriptSock: On threaded servers, designate the path to the UNIX</span><br><span class="line">    # socket used to communicate with the CGI daemon of mod_cgid.</span><br><span class="line">    #</span><br><span class="line">    #Scriptsock logs&#x2F;cgisock</span><br><span class="line">&lt;&#x2F;IfModule&gt;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># &quot;&#x2F;usr&#x2F;local&#x2F;httpd-2.2.24&#x2F;&#x2F;cgi-bin&quot; should be changed to whatever your ScriptAliased</span><br><span class="line"># CGI directory exists, if you have that configured.</span><br><span class="line">#</span><br><span class="line">&lt;Directory &quot;&#x2F;usr&#x2F;local&#x2F;httpd-2.2.24&#x2F;&#x2F;cgi-bin&quot;&gt;</span><br><span class="line">    AllowOverride None</span><br><span class="line">    Options None</span><br><span class="line">    Order allow,deny</span><br><span class="line">    Allow from all</span><br><span class="line">&lt;&#x2F;Directory&gt;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># DefaultType: the default MIME type the server will use for a document</span><br><span class="line"># if it cannot otherwise determine one, such as from filename extensions.</span><br><span class="line"># If your server contains mostly text or HTML documents, &quot;text&#x2F;plain&quot; is</span><br><span class="line"># a good value.  If most of your content is binary, such as applications</span><br><span class="line"># or images, you may want to use &quot;application&#x2F;octet-stream&quot; instead to</span><br><span class="line"># keep browsers from trying to display binary files as though they are</span><br><span class="line"># text.</span><br><span class="line">#</span><br><span class="line">DefaultType text&#x2F;plain</span><br><span class="line"></span><br><span class="line">&lt;IfModule mime_module&gt;</span><br><span class="line">    #</span><br><span class="line">    # TypesConfig points to the file containing the list of mappings from</span><br><span class="line">    # filename extension to MIME-type.</span><br><span class="line">    #</span><br><span class="line">    TypesConfig &#x2F;etc&#x2F;httpd&#x2F;mime.types</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # AddType allows you to add to or override the MIME configuration</span><br><span class="line">    # file specified in TypesConfig for specific file types.</span><br><span class="line">    #</span><br><span class="line">    #AddType application&#x2F;x-gzip .tgz</span><br><span class="line">    #</span><br><span class="line">    # AddEncoding allows you to have certain browsers uncompress</span><br><span class="line">    # information on the fly. Note: Not all browsers support this.</span><br><span class="line">    #</span><br><span class="line">    #AddEncoding x-compress .Z</span><br><span class="line">    #AddEncoding x-gzip .gz .tgz</span><br><span class="line">    #</span><br><span class="line">    # If the AddEncoding directives above are commented-out, then you</span><br><span class="line">    # probably should define those extensions to indicate media types:</span><br><span class="line">    #</span><br><span class="line">    AddType application&#x2F;x-compress .Z</span><br><span class="line">    AddType application&#x2F;x-gzip .gz .tgz</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # AddHandler allows you to map certain file extensions to &quot;handlers&quot;:</span><br><span class="line">    # actions unrelated to filetype. These can be either built into the server</span><br><span class="line">    # or added with the Action directive (see below)</span><br><span class="line">    #</span><br><span class="line">    # To use CGI scripts outside of ScriptAliased directories:</span><br><span class="line">    # (You will also need to add &quot;ExecCGI&quot; to the &quot;Options&quot; directive.)</span><br><span class="line">    #</span><br><span class="line">    #AddHandler cgi-script .cgi</span><br><span class="line"></span><br><span class="line">    # For type maps (negotiated resources):</span><br><span class="line">    #AddHandler type-map var</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # Filters allow you to process content before it is sent to the client.</span><br><span class="line">    #</span><br><span class="line">    # To parse .shtml files for server-side includes (SSI):</span><br><span class="line">    # (You will also need to add &quot;Includes&quot; to the &quot;Options&quot; directive.)</span><br><span class="line">    #</span><br><span class="line">    #AddType text&#x2F;html .shtml</span><br><span class="line">    #AddOutputFilter INCLUDES .shtml</span><br><span class="line">&lt;&#x2F;IfModule&gt;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># The mod_mime_magic module allows the server to use various hints from the</span><br><span class="line"># contents of the file itself to determine its type.  The MIMEMagicFile</span><br><span class="line"># directive tells the module where the hint definitions are located.</span><br><span class="line">#</span><br><span class="line">#MIMEMagicFile &#x2F;etc&#x2F;httpd&#x2F;magic</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># Customizable error responses come in three flavors:</span><br><span class="line"># 1) plain text 2) local redirects 3) external redirects</span><br><span class="line">#</span><br><span class="line"># Some examples:</span><br><span class="line">#ErrorDocument 500 &quot;The server made a boo boo.&quot;</span><br><span class="line">#ErrorDocument 404 &#x2F;missing.html</span><br><span class="line">#ErrorDocument 404 &quot;&#x2F;cgi-bin&#x2F;missing_handler.pl&quot;</span><br><span class="line">#ErrorDocument 402 http:&#x2F;&#x2F;www.example.com&#x2F;subscription_info.html</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># MaxRanges: Maximum number of Ranges in a request before</span><br><span class="line"># returning the entire resource, or one of the special</span><br><span class="line"># values &#39;default&#39;, &#39;none&#39; or &#39;unlimited&#39;.</span><br><span class="line"># Default setting is to accept 200 Ranges.</span><br><span class="line">#MaxRanges unlimited</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># EnableMMAP and EnableSendfile: On systems that support it, </span><br><span class="line"># memory-mapping or the sendfile syscall is used to deliver</span><br><span class="line"># files.  This usually improves server performance, but must</span><br><span class="line"># be turned off when serving from networked-mounted </span><br><span class="line"># filesystems or if support for these functions is otherwise</span><br><span class="line"># broken on your system.</span><br><span class="line">#</span><br><span class="line">#EnableMMAP off</span><br><span class="line">#EnableSendfile off</span><br><span class="line"></span><br><span class="line"># Supplemental configuration</span><br><span class="line">#</span><br><span class="line"># The configuration files in the &#x2F;etc&#x2F;httpd&#x2F;extra&#x2F; directory can be </span><br><span class="line"># included to add extra features or to modify the default configuration of </span><br><span class="line"># the server, or you may simply copy their contents here and change as </span><br><span class="line"># necessary.</span><br><span class="line"></span><br><span class="line"># Server-pool management (MPM specific)</span><br><span class="line">#Include &#x2F;etc&#x2F;httpd&#x2F;extra&#x2F;httpd-mpm.conf</span><br><span class="line"></span><br><span class="line"># Multi-language error messages</span><br><span class="line">#Include &#x2F;etc&#x2F;httpd&#x2F;extra&#x2F;httpd-multilang-errordoc.conf</span><br><span class="line"></span><br><span class="line"># Fancy directory listings</span><br><span class="line">#Include &#x2F;etc&#x2F;httpd&#x2F;extra&#x2F;httpd-autoindex.conf</span><br><span class="line"></span><br><span class="line"># Language settings</span><br><span class="line">#Include &#x2F;etc&#x2F;httpd&#x2F;extra&#x2F;httpd-languages.conf</span><br><span class="line"></span><br><span class="line"># User home directories</span><br><span class="line">#Include &#x2F;etc&#x2F;httpd&#x2F;extra&#x2F;httpd-userdir.conf</span><br><span class="line"></span><br><span class="line"># Real-time info on requests and configuration</span><br><span class="line">#Include &#x2F;etc&#x2F;httpd&#x2F;extra&#x2F;httpd-info.conf</span><br><span class="line"></span><br><span class="line"># Virtual hosts</span><br><span class="line">#Include &#x2F;etc&#x2F;httpd&#x2F;extra&#x2F;httpd-vhosts.conf</span><br><span class="line"></span><br><span class="line"># Local access to the Apache HTTP Server Manual</span><br><span class="line">#Include &#x2F;etc&#x2F;httpd&#x2F;extra&#x2F;httpd-manual.conf</span><br><span class="line"></span><br><span class="line"># Distributed authoring and versioning (WebDAV)</span><br><span class="line">#Include &#x2F;etc&#x2F;httpd&#x2F;extra&#x2F;httpd-dav.conf</span><br><span class="line"></span><br><span class="line"># Various default settings</span><br><span class="line">#Include &#x2F;etc&#x2F;httpd&#x2F;extra&#x2F;httpd-default.conf</span><br><span class="line"></span><br><span class="line"># Secure (SSL&#x2F;TLS) connections</span><br><span class="line">#Include &#x2F;etc&#x2F;httpd&#x2F;extra&#x2F;httpd-ssl.conf</span><br><span class="line">#</span><br><span class="line"># Note: The following must must be present to support</span><br><span class="line">#       starting without SSL on platforms with no &#x2F;dev&#x2F;random equivalent</span><br><span class="line">#       but a statically compiled-in mod_ssl.</span><br><span class="line">#</span><br><span class="line">&lt;IfModule ssl_module&gt;</span><br><span class="line">SSLRandomSeed startup builtin</span><br><span class="line">SSLRandomSeed connect builtin</span><br><span class="line">&lt;&#x2F;IfModule&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ServerName localhost:80</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://github.com/r0manj/2018/11/20/lamp-Zabbix%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9B%91%E6%8E%A7%E9%83%A8%E7%BD%B2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rohman.Zhu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="R0hman の 实验室">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/20/lamp-Zabbix%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9B%91%E6%8E%A7%E9%83%A8%E7%BD%B2/" itemprop="url">lamp-Zabbix服务器监控部署</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-20T23:18:36+08:00">
                2018-11-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul>
<li>Centos 7</li>
<li>Zabbix-4.0</li>
<li>PHP-7.2.12</li>
<li>Apache-2.2.24</li>
<li>MariaDB-10.3.11 Stable</li>
</ul>
<blockquote>
<p>采用编译安装</p>
</blockquote>
<blockquote>
<p>Centos 7 的防火墙坑，firewall-cmd –stat 看看防火墙的状态是否为运行状态。</p>
</blockquote>
<h1 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h1><p>完成应用的安装<br>Deadline ：2018-12-2 0:00 [完成时间：20181202 22:30]</p>
<p>完成监控部署<br>Deadline ：2018-12-8 0:00</p>
<h1 id="Linux中的准备工作"><a href="#Linux中的准备工作" class="headerlink" title="Linux中的准备工作"></a>Linux中的准备工作</h1><ul>
<li><p>httpd (提供 Apache 主程式)</p>
</li>
<li><p>mysql (MySQL 客戶端程式)</p>
</li>
<li><p>mysql-server (MySQL 伺服器程式)</p>
</li>
<li><p>php (PHP 主程式含給 apache 使用的模組)</p>
</li>
<li><p>php-devel (PHP 的發展工具，這個與 PHP 外掛的加速軟體有關)</p>
</li>
<li><p>php-mysql (提供給 PHP 程式讀取 MySQL 資料庫的模組)</p>
</li>
<li><p>关闭 Selinux</p>
</li>
<li><p>关闭 Iptables</p>
</li>
<li><p>添加 mysql 账号</p>
</li>
<li><p>添加 zabbix 账号</p>
</li>
<li><p>添加 apache 账号</p>
</li>
</ul>
<h1 id="安装Apache"><a href="#安装Apache" class="headerlink" title="安装Apache"></a>安装Apache</h1><p>先安装apache必备运行库 ， 安装 apr 和 apr-util </p>
<ul>
<li>apr-1.6.5</li>
<li>apr-util-1.6.1</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装依赖包</span></span><br><span class="line">yum install pcre-devel -y</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装运行库必备</span></span><br><span class="line">wget -O apr-1.6.5.tar.gz http://mirror.bit.edu.cn/apache//apr/apr-1.6.5.tar.gz</span><br><span class="line"></span><br><span class="line">wget -O apr-util-1.6.1.tar.gz http://mirror.bit.edu.cn/apache//apr/apr-util-1.6.1.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 到 apr 目录下</span></span><br><span class="line">./configure --prefix=/usr/local/apr-1.6.5</span><br><span class="line"><span class="meta">#</span><span class="bash"> 检查</span></span><br><span class="line">echo  $?</span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果没有错误则编译安装</span></span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 到 apr-util 目录下</span></span><br><span class="line">./configure --prefxi=/usr/local/apr-util-1.6.1 --with-apr=/usr/local/apr</span><br><span class="line"><span class="meta">#</span><span class="bash"> 检查</span></span><br><span class="line">echo $?</span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 到httpd-2.2.4的目录下安装</span></span><br><span class="line">./configure --prefix=/usr/local/httpd-2.2.24/ --sysconfdir=/etc/httpd --enable-so --enable-rewrite --enable-ssl --enable-cgi --enable-cgid --enable-modules=most --enable-mods-shared=most --enable-mpms-shared=all --with-apr=/usr/local/apr --with-apr-util=/usr/local/apr-util</span><br><span class="line"></span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 参数说明</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --<span class="built_in">enable</span>-so：支持动态共享模块，如果支持php将不能与apache一起工作。必须要有</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --<span class="built_in">enable</span>-ssl：启用ssl功能，如果不启用将无法使用https</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --<span class="built_in">enable</span>-mpms-shared=all：prefork、worker、event</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --with-mpm=event：event为默认</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --<span class="built_in">enable</span>-rewrite：支持URL重写</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --<span class="built_in">enable</span>-cgi :支持cgi</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --<span class="built_in">enable</span>-cgid:httpd使用event或者worker得启用被线程方式访问</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --<span class="built_in">enable</span>-modules=most :启用大多数模块</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --<span class="built_in">enable</span>-mods-shared=most:启用大多数共享模块</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">复制apachectl到/etc/init.d下</span></span><br><span class="line">cp /usr/local/httpd/bin/apachectl /etc/init.d/httpd</span><br></pre></td></tr></table></figure>

<h2 id="Apache启动报错"><a href="#Apache启动报错" class="headerlink" title="Apache启动报错"></a>Apache启动报错</h2><ol>
<li>Could not reliably determine the server’s fully qualified domain name, using localhost.localdomain for ServerName</li>
</ol>
<ol start="2">
<li>configure: error: …No recognized SSL/TLS toolkit detected</li>
</ol>
<ul>
<li>yum install openssl-devel -y</li>
</ul>
<ol start="3">
<li>Syntax error on line 118 of /usr/local/httpd-2.2.24/conf/httpd.conf:Invalid command ‘Order’, perhaps misspelled or defined by a module not included in the server configuration</li>
</ol>
<ul>
<li>没有加载 mod_authz_host.so 模块</li>
<li>LoadModule authz_host_module modules/mod_authz_host.so</li>
</ul>
<h1 id="安装PHP-7-2-12"><a href="#安装PHP-7-2-12" class="headerlink" title="安装PHP-7.2.12"></a>安装PHP-7.2.12</h1><ul>
<li>curl 要求 7.10.5+</li>
<li>区别于 –with-mysql , 这个版本的php用的是 –with-pdo-mysql ,而不是用 –with-mysql</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/usr/local/php-7.2.12 --with-config-file-path=/usr/local/php-7.2.12/etc --with-bz2 --with-curl --enable-ftp --enable-sockets --disable-ipv6 --with-gd --with-jpeg-dir=/usr/local --with-png-dir=/usr/local --with-freetype-dir=/usr/local --with-iconv-dir=/usr/local --enable-mbstring --enable-calendar --with-gettext --with-libxml-dir=/usr/local --with-zlib --with-pdo-mysql=mysqlnd --with-mysqli=mysqlnd --enable-dom --enable-xml --enable-fpm --with-libdir=lib64 --enable-bcmath --enable-mbstring --with-gd  --with-libxml-dir=/usr/local --with-apxs2=/usr/local/httpd/bin/apxs</span><br><span class="line"></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>

<blockquote>
<p>因为要编译apache的php模块，所以一定要带上 –with-apxs2 参数。</p>
</blockquote>
<p>需要对 apache 的配置文件进行设置 ， httpd.conf , 默认在 /usr/local/httpd/conf/httpd.conf 。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 添加解析问文件后缀</span></span><br><span class="line">AddType application/x-httpd-php .php .html .htm</span><br><span class="line"></span><br><span class="line">LoadModule php7_module modules/libphp7.so</span><br><span class="line"></span><br><span class="line">添加解析节点</span><br><span class="line">&lt;FileMatch \.php$&gt;</span><br><span class="line">    SetHandler application/x-httpd-php</span><br><span class="line">&lt;FileMatch&gt;</span><br></pre></td></tr></table></figure>

<p>设置几个必要参数 , 修改配置文件 /etc/php.ini</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看 php 的配置文件 php.ini 的路径</span></span><br><span class="line">./bin/php --ini</span><br><span class="line"><span class="meta">#</span><span class="bash"> 编辑 php.ini 文件</span></span><br><span class="line">vi /etc/php.ini</span><br><span class="line">---</span><br><span class="line">max_execution_time = 300</span><br><span class="line">memory_limit = 128M</span><br><span class="line">post_max_size = 16M</span><br><span class="line">upload_max_filesize = 2M</span><br><span class="line">max_input_time = 300</span><br><span class="line">date.timezone PRC</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 修改完后，需要重启 web服务器 才能生效。</span></span><br><span class="line">/etc/init.d/httpd restart</span><br></pre></td></tr></table></figure>

<ul>
<li>php-fpm.conf 是 PHP-FPM特有的配置文件。</li>
<li>php.ini 是 PHP 解析器的配置文件。</li>
</ul>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><ol>
<li>wrong mysql library version or lib not found.</li>
</ol>
<ul>
<li>不指定对应的mysqli即可。</li>
</ul>
<ol start="2">
<li>ERROR: No pool defined. at least one pool section must be specified in confi</li>
</ol>
<ul>
<li>进入PHP安装目录/etc/php-fpm.d ，将<a href="http://www.conf.default改名为www.conf" target="_blank" rel="noopener">www.conf.default改名为www.conf</a></li>
<li>这个是池的定义，默认的为www池。</li>
</ul>
<h1 id="安装-Mysql"><a href="#安装-Mysql" class="headerlink" title="安装 Mysql"></a>安装 Mysql</h1><p>解压源码包，执行编译安装。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">tar xf mariaDB-10.3.11.tar.gz</span><br><span class="line"></span><br><span class="line">cd mariaDB-10.3.11</span><br><span class="line"></span><br><span class="line">cmake . -DCMAKE_INSTALL_PREFIX=/usr/local/mariaDB-10.3.11 -DMYSQL_DATADIR=/usr/local/mariadb/DB-DATA/ -DSYSCONFDIR=/etc -DWITHOUT_TOKUDB=1 -DWITH_INNOBASE_STORAGE_ENGINE=1  -DMYSQL_UNIX_ADDR=/tmp/mysql.sock -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci</span><br><span class="line"></span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 参数说明：</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> -DCMAKE_INSTALL_PREFIX是指定安装的位置</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -DMYSQL_DATADIR是指定MySQL的数据目录</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -DSYSCONFDIR是指定配置文件所在的目录，一般都是/etc ，具体的配置文件是/etc/my.cnf</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -DWITHOUT_TOKUDB=1这个参数一般都要设置上，表示不安装tokudb引擎。</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> tokudb是MySQL中一款开源的存储引擎，可以管理大量数据并且有一些新的特性，这些是Innodb所不具备的，这里之所以不安装，是因为一般计算机默认是没有Percona Server的，并且加载tokudb还要依赖jemalloc内存优化，一般开发中也是不用tokudb的，所以暂时屏蔽掉。</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">将常用指令添加至环境变量中。</span></span><br><span class="line"></span><br><span class="line">vim /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">---profile---</span></span><br><span class="line">export PATH="/usr/local/mariaDB/bin:$PATH"</span><br><span class="line"><span class="meta">#</span><span class="bash">---profile---</span></span><br><span class="line"></span><br><span class="line">source /etc/profile</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">关于配置文件，默认安装中，mysql的配置文件放在 /etc/my.cnf 中，里面需要编辑，有关于服务端的配置。</span></span><br><span class="line"></span><br><span class="line">vim /etc/my.cnf</span><br><span class="line">---</span><br><span class="line">[mysqld]</span><br><span class="line">basedir=/usr/local/mariaDB-10.3.11</span><br><span class="line">port=3306</span><br><span class="line">socket=/tmp/mysqld.socket</span><br><span class="line">datadir=/db-data/</span><br><span class="line">log_error=/db-data/mariaDB-error.log</span><br><span class="line"></span><br><span class="line">[client]</span><br><span class="line">socket=/tmp/mysqld.socket</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 进入数据库</span></span><br><span class="line">/usr/local/mysqld/support-files/mysql.service start</span><br></pre></td></tr></table></figure>


<h2 id="遇到的问题-1"><a href="#遇到的问题-1" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><ol>
<li>无法看到报错日志。</li>
</ol>
<ul>
<li>需要自己手动创建报错日志文件 ，即 touch /var/log/mariadb/mariadb.log</li>
<li>没有配置mysqld的错误日志输出 log_error 参数未设置</li>
</ul>
<ol start="2">
<li>无法启动 mysql 服务 ，因为 mysql.user 表不存在。“Fatal error: Can’t open and lock privilege tables: Table ‘mysql.user’ doesn’t exist“</li>
</ol>
<ul>
<li>这个是因为列表没有初始化，导致数据库无法识别到相应的用户信息以及数据库信息。</li>
<li>检查方法：在 my.cnf 配置文件的 [mysqld] 节点中添加 skip-grant-tables , 就可以跳过检查 user 表进入数据库，可以看到里面并没有mysql这个库。</li>
<li>真正的解决方法是在编译安装完后，需要运行脚本 mysql_install_db</li>
</ul>
<p>下面是mysql进程所调用的路径</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql    120667  0.1  3.9 1281688 73040 pts/0   Sl   12:58   0:00 /usr/local/mysql/bin/mysqld --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data --plugin-dir=/usr/local/mysql/lib/plugin --user=mysql --log-error=/usr/local/mysql/data/localhost.localdomain.err --pid-file=/usr/local/mysql/data/localhost.localdomain.pid</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>如果还是无法启动，请检查以下 mysql 目录下的用户权限。“ Cannot open ‘/data/mysql/ib_buffer_pool’ for reading: Permission denied<br>”</li>
</ol>
<ul>
<li>因为使用mysql用户去启动这个进程，所有调用都是使用mysql去实现，因此必要的文件必须拥授权给mysql。</li>
</ul>
<ol start="4">
<li>启动遇到socket问题，无法连接 mysql.socket.</li>
</ol>
<ul>
<li>这是因为我已经修改了socket文件的命名，默认的是mysql.socket , 因此只需要在启动的时候指定 socket 即可 ， 加参数 -S 。</li>
</ul>
<h1 id="安装Zabbix-4-0-2"><a href="#安装Zabbix-4-0-2" class="headerlink" title="安装Zabbix-4.0.2"></a>安装Zabbix-4.0.2</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/usr/local/zabbix-4.0.2/ --enable-server \</span><br><span class="line">--enable-agent --with-mysql --with-net-snmp --with-libcurl --with-libxml2</span><br><span class="line"></span><br><span class="line">make &amp;&amp; make install=</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建专门用于zabbix的账户</span></span><br><span class="line">useradd zabbix -s /sbin/nologin</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 初始化zabbix的数据库</span></span><br><span class="line">mysql -uroot -p -S /tmp/mysql.socket &lt; 'create database zabbix default charset utf8'</span><br><span class="line"><span class="meta">#</span><span class="bash"> 初始化数据库的表格</span></span><br><span class="line">mysql -uroot zabbix &lt; /data/zabbix-2.2.20/database/mysql/schema.sql</span><br><span class="line"><span class="meta">#</span><span class="bash">初始化sever</span></span><br><span class="line">mysql -uroot zabbix&lt; /data/zabbix-2.2.20/database/mysql/images.sql</span><br><span class="line">mysql -uroot zabbix&lt; /data/zabbix-2.2.20/database/mysql/data.sql</span><br><span class="line"><span class="meta">#</span><span class="bash"> 导入sql语句的时候，可能会提示没有找到数据库</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 自己手动往 schema.sql 、 images.sql 、 data.sql 上添加 use zabbix</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 配置zabbix_server</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> TODO ： 前端文件复制到 Apache 目录下</span></span><br><span class="line">mkdir /etc/zabbix</span><br><span class="line">cp config/zabbix_server.conf /etc/zabbix/</span><br><span class="line">vim /etc/zabbix/zabbix_server.conf</span><br><span class="line"><span class="meta">#</span><span class="bash">---zabbix_server.conf---<span class="comment">#</span></span></span><br><span class="line">DBName=zabbix</span><br><span class="line">DBUser=root</span><br><span class="line">DBPassword=ttlsapwd</span><br><span class="line">DBPort=3306</span><br><span class="line"><span class="meta">#</span><span class="bash">---zabbix_server.conf---<span class="comment">#</span></span></span><br></pre></td></tr></table></figure>

<p>Zabbix 初始账号和密码：</p>
<ul>
<li>Usr ： Admin</li>
<li>Pwd ： zabbix</li>
</ul>
<h2 id="遇到的问题-2"><a href="#遇到的问题-2" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><ol>
<li>configure: error: newly created file is older than distributed files!</li>
</ol>
<ul>
<li>硬件时钟、系统时间不一致导致的问题。</li>
</ul>
<ol start="2">
<li>进入web界面，初始化zabbix遇到以下问题。</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Minimum required size of PHP post is 16M (configuration option "post_max_size").</span><br><span class="line">Minimum required limit on execution time of PHP scripts is 300 (configuration option "max_execution_time").</span><br><span class="line">Time zone for PHP is not set (configuration parameter "date.timezone").</span><br></pre></td></tr></table></figure>

<ul>
<li>这个需要修改 php.ini 文件。</li>
<li>timezone 是在 php-5.1 开始引入的东西，默认是关闭的，显示的时间是格林威治标准时间，和北京时间相差 8 个小时。</li>
</ul>
<h1 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h1><p>对于安装顺序的要求，是因为安装时会有关联，因此先执行以下的安装顺序较为妥当：</p>
<ol>
<li>安装 Apache</li>
<li>安装 Mysql</li>
<li>安装 PHP<ol>
<li>加上 axps 参数，指定apache路径</li>
</ol>
</li>
<li>安装 Zabbix</li>
</ol>
<p>Centos中对防火墙的使用并不是 iptables ， 而是 firewalld 因此在端口拦截方面要注意此应用。</p>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul>
<li>坑爹的网卡配置 ：<a href="https://www.linuxidc.com/Linux/2017-04/143002.htm" target="_blank" rel="noopener">https://www.linuxidc.com/Linux/2017-04/143002.htm</a></li>
<li>坑爹的网卡操作指令：<a href="https://linux.cn/article-3631-1.html" target="_blank" rel="noopener">https://linux.cn/article-3631-1.html</a></li>
<li>阿里源 <a href="https://blog.csdn.net/jameshadoop/article/details/54881295" target="_blank" rel="noopener">https://blog.csdn.net/jameshadoop/article/details/54881295</a></li>
<li>APR :<a href="http://apr.apache.org/download.cgi" target="_blank" rel="noopener">http://apr.apache.org/download.cgi</a> </li>
<li>Apache ： <a href="https://archive.apache.org/dist/httpd/" target="_blank" rel="noopener">https://archive.apache.org/dist/httpd/</a></li>
<li>开发套件安装 ：<a href="https://www.linuxidc.com/Linux/2016-04/130081.htm" target="_blank" rel="noopener">https://www.linuxidc.com/Linux/2016-04/130081.htm</a></li>
<li>Httpd 配置 ： <a href="https://www.linuxidc.com/Linux/2016-04/130079.htm" target="_blank" rel="noopener">https://www.linuxidc.com/Linux/2016-04/130079.htm</a></li>
<li>Apache-2.2 ：<a href="http://httpd.apache.org/docs/2.2/" target="_blank" rel="noopener">http://httpd.apache.org/docs/2.2/</a></li>
<li>Zabbix官方安装指引 ： <a href="https://www.zabbix.com/cn/download?zabbix=4.0&amp;os_distribution=centos&amp;os_version=7&amp;db=MySQL" target="_blank" rel="noopener">https://www.zabbix.com/cn/download?zabbix=4.0&amp;os_distribution=centos&amp;os_version=7&amp;db=MySQL</a></li>
<li>MariaDB-10.3.11 : <a href="https://downloads.mariadb.org/mariadb/10.3.11/" target="_blank" rel="noopener">https://downloads.mariadb.org/mariadb/10.3.11/</a></li>
<li>MariaDB : <a href="https://mariadb.com/kb/zh-cn/mariadb/" target="_blank" rel="noopener">https://mariadb.com/kb/zh-cn/mariadb/</a></li>
<li>MariaDB-10.1.18源码安装：<a href="https://www.cnblogs.com/freeweb/p/5991374.html" target="_blank" rel="noopener">https://www.cnblogs.com/freeweb/p/5991374.html</a></li>
<li>php 时区设置：<a href="https://www.jb51.net/article/27821.htm" target="_blank" rel="noopener">https://www.jb51.net/article/27821.htm</a></li>
<li>firewall-cmd : <a href="https://www.jianshu.com/p/411274f96492" target="_blank" rel="noopener">https://www.jianshu.com/p/411274f96492</a></li>
<li>PHP的配置文件 ： <a href="https://blog.csdn.net/u012129607/article/details/71191489" target="_blank" rel="noopener">https://blog.csdn.net/u012129607/article/details/71191489</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://github.com/r0manj/2018/11/18/%E5%90%AF%E5%8A%A8%E9%94%99%E8%AF%AF-init%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%94%99%E8%AF%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rohman.Zhu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="R0hman の 实验室">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/18/%E5%90%AF%E5%8A%A8%E9%94%99%E8%AF%AF-init%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%94%99%E8%AF%AF/" itemprop="url">启动错误-init配置文件错误</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-18T19:05:38+08:00">
                2018-11-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>进入 single mode 也要读取 /etc/inittab 来开机。如果无法进入单用户模式，改用 bash 。</p>
<h1 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub edit &gt; kernel /vmlinuz-2.6.18-92.e15 ro root=LABEL=/ rhgb quiet init=/bin/bash</span><br></pre></td></tr></table></figure>

<p>指定内核调用第一个进程（init）变成 /bin/bash  , 因此 /sbin/init 就不会被执行。</p>
<p>进入 bash 界面将根目录变成读写状态：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -o remount,rw /</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://github.com/r0manj/2018/11/18/Linux-%E5%BF%98%E8%AE%B0root%E5%AF%86%E7%A0%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rohman.Zhu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="R0hman の 实验室">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/18/Linux-%E5%BF%98%E8%AE%B0root%E5%AF%86%E7%A0%81/" itemprop="url">Linux-忘记root密码</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-18T19:05:22+08:00">
                2018-11-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>有时候一台 Linux 虚拟机放太久了，又没有做注释，初始密码就容易忘记。</p>
<p>前提条件：</p>
<ul>
<li>MBR + Grub 的方式引导系统启动。</li>
</ul>
<h1 id="CentOS密码忘记"><a href="#CentOS密码忘记" class="headerlink" title="CentOS密码忘记"></a>CentOS密码忘记</h1><ul>
<li>进入 grub 菜单后，对想要编辑的菜单项按 [E] 键编辑；</li>
<li>再将光标移到 Kernel 上方再点 [E] 键编辑；</li>
<li>在末尾添加 single ：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub edit &gt; kernel &#x2F;vmlinuz-2.6.18-92.e15 ro root&#x3D;LABEL&#x3D;&#x2F; rhgb quiet single</span><br></pre></td></tr></table></figure>

<ul>
<li>按 [回车] 键后， 按 [B] 键即可进入单用户维护模式了。</li>
</ul>
<h1 id="Ubuntu-进入恢复模式"><a href="#Ubuntu-进入恢复模式" class="headerlink" title="Ubuntu 进入恢复模式"></a>Ubuntu 进入恢复模式</h1><ul>
<li>开机长按 [Shift] 键进入 grub 菜单；</li>
<li>进入高级菜单 [Advanced options for Ubuntu] ；</li>
<li>选择任意一个恢复模式；</li>
<li>选择 “root Drop to root shell prompt”;</li>
<li>重新挂载 / 目录 ， mount -o remount,rw /</li>
<li>再去修改密码。</li>
</ul>
<h1 id="Ubuntu-修改内核启动参数"><a href="#Ubuntu-修改内核启动参数" class="headerlink" title="Ubuntu 修改内核启动参数"></a>Ubuntu 修改内核启动参数</h1><ul>
<li>开机长按 [Shift] 键进入 grub 菜单；</li>
<li>进入高级菜单 [Advanced options for Ubuntu] ；</li>
<li>选择任意一个恢复模式,按 [E] 键编辑；</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 将 linux 那一行的末尾 ro single 改成 rw single init=/bin/bash</span></span><br><span class="line">rw single init=/bin/bash</span><br></pre></td></tr></table></figure>

<ul>
<li>按 [Ctrl] + [X] 进入单用户模式，修改密码。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://github.com/r0manj/2018/11/18/%E4%B8%BAGrub%E8%8F%9C%E5%8D%95%E6%B7%BB%E5%8A%A0%E5%AF%86%E7%A0%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rohman.Zhu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="R0hman の 实验室">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/18/%E4%B8%BAGrub%E8%8F%9C%E5%8D%95%E6%B7%BB%E5%8A%A0%E5%AF%86%E7%A0%81/" itemprop="url">为Grub菜单添加密码</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-18T19:03:10+08:00">
                2018-11-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://github.com/r0manj/2018/11/18/BIOS-%E6%97%A0%E6%B3%95%E8%AF%BB%E5%8F%96%E5%A4%A7%E7%A1%AC%E7%9B%98%E7%9A%84%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rohman.Zhu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="R0hman の 实验室">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/18/BIOS-%E6%97%A0%E6%B3%95%E8%AF%BB%E5%8F%96%E5%A4%A7%E7%A1%AC%E7%9B%98%E7%9A%84%E9%97%AE%E9%A2%98/" itemprop="url">BIOS 无法读取大硬盘的问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-18T19:02:21+08:00">
                2018-11-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://github.com/r0manj/2018/11/18/ToDo-%E4%BF%AE%E5%A4%8D%E5%9B%A0%E7%BC%BA%E5%B0%91initrd%E8%80%8C%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8%E7%9A%84grub%E7%A8%8B%E5%BA%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rohman.Zhu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="R0hman の 实验室">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/18/ToDo-%E4%BF%AE%E5%A4%8D%E5%9B%A0%E7%BC%BA%E5%B0%91initrd%E8%80%8C%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8%E7%9A%84grub%E7%A8%8B%E5%BA%8F/" itemprop="url">ToDo-修复因缺少initrd而无法启动的grub程序</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-18T18:20:44+08:00">
                2018-11-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://github.com/r0manj/2018/11/17/%E5%BE%85%E8%A1%A5%E5%85%85-Boot-Loader-Grub/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rohman.Zhu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="R0hman の 实验室">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/17/%E5%BE%85%E8%A1%A5%E5%85%85-Boot-Loader-Grub/" itemprop="url">待补充-Boot Loader:Grub</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-17T23:03:01+08:00">
                2018-11-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><ul>
<li>在BIOS 读完信息后，第一启动设备的MBR会去读取boot loader 。</li>
<li>boot loader 具有菜单功能、直接加载内核文件 以及 控制权移交的功能等，系统必须要有 loader 才有办法加载该操作系统的内核。</li>
<li>MBR 是整个硬盘的第一个 sector 内的一个块，充其量整个大小也才446bytes。</li>
</ul>
<p><img src="https://images0.cnblogs.com/blog/432441/201305/19135459-4ac4e5873a42476c95a02460464449d5.jpg" alt="启动顺序"></p>
<p>测试环境：</p>
<ul>
<li>CentOS 6.9</li>
</ul>
<h1 id="TODO-LIST"><a href="#TODO-LIST" class="headerlink" title="TODO-LIST"></a>TODO-LIST</h1><ul>
<li>两块硬盘，每一块硬盘都装有不同的系统，编写双系统启动grub引导文件。</li>
<li>当从一块没有系统的硬盘（只装有grub的硬盘）启动，如何快速修复进入系统）[完成时间：2018-11-18]</li>
<li>第二块盘上面的grub配置文件有误，如何快速进入系统[完成时间：2018-11-18]</li>
<li>修复Ubuntu下的无法启动问题。</li>
<li>修复采用LVM分区方式的Ubuntu无法启动问题。  </li>
</ul>
<h1 id="Linux中的解决方案"><a href="#Linux中的解决方案" class="headerlink" title="Linux中的解决方案"></a>Linux中的解决方案</h1><p>Linux将boot loader的程序代码执行与设置值加载分成两个阶段（stage）</p>
<h2 id="Stage-1-：-执行boot-loader-主程序"><a href="#Stage-1-：-执行boot-loader-主程序" class="headerlink" title="Stage 1 ： 执行boot loader 主程序"></a>Stage 1 ： 执行boot loader 主程序</h2><p>这个主程序必须安装在启动区 ， 即 MBR或者 boot sector 。 不过由于 MBR 实在太小了， 因此 MBR 或者 boot sector 通常仅安装 boot loader 的最小主程序 ， 并没有安装 loader 的相关配置文件。</p>
<h2 id="Stage-2-：-主程序加载配置文件"><a href="#Stage-2-：-主程序加载配置文件" class="headerlink" title="Stage 2 ： 主程序加载配置文件"></a>Stage 2 ： 主程序加载配置文件</h2><p>通过boot loader加载所有配置文件与相关的环境参数文件（包括文件系统定义与主要配置文件menu.lst) , 一般在 /boot 下面。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 与Grub有关的文件都放在 /boot/grub 中</span></span><br><span class="line">[root@OrigialCentOS ~]# ll /boot/grub/</span><br><span class="line">总用量 274</span><br><span class="line">-rw-r--r--. 1 root root     63 11月  9 2017 device.map  # grub 的设备对应文件</span><br><span class="line">-rw-r--r--. 1 root root  13428 11月  9 2017 e2fs_stage1_5 # ext2/ext3 文件系统的定义文件</span><br><span class="line">-rw-r--r--. 1 root root  12636 11月  9 2017 fat_stage1_5 # fat 文件系统的定义文件</span><br><span class="line">-rw-r--r--. 1 root root  11780 11月  9 2017 ffs_stage1_5 # ffs 文件系统的定义文件</span><br><span class="line">-rw-------. 1 root root    771 11月  9 2017 grub.conf # grub 在 Centos中的配置文件</span><br><span class="line">-rw-r--r--. 1 root root  11772 11月  9 2017 iso9660_stage1_5 # 光驱文件系统的定义文件</span><br><span class="line">-rw-r--r--. 1 root root  13284 11月  9 2017 jfs_stage1_5 # jfs 文件系统的定义文件</span><br><span class="line">lrwxrwxrwx. 1 root root     11 11月  9 2017 menu.lst -&gt; ./grub.conf # menu.lst 配置文件</span><br><span class="line">-rw-r--r--. 1 root root  11972 11月  9 2017 minix_stage1_5 # minix 文件系统定义文件</span><br><span class="line">-rw-r--r--. 1 root root  14428 11月  9 2017 reiserfs_stage1_5 # reiserfs 文件系统的定义文件</span><br><span class="line">-rw-r--r--. 1 root root   1341 11月 15 2010 splash.xpm.gz # 启动时 在 grub 下面的后台图示</span><br><span class="line">-rw-r--r--. 1 root root    512 11月  9 2017 stage1 # stage 1 的相关说明</span><br><span class="line">-rw-r--r--. 1 root root 126148 11月  9 2017 stage2 # stage 2 的相关说明</span><br><span class="line">-rw-r--r--. 1 root root  12040 11月  9 2017 ufs2_stage1_5 # ufs 的文件系统定义文件</span><br><span class="line">-rw-r--r--. 1 root root  11380 11月  9 2017 vstafs_stage1_5 # vstafs 的文件系统定义文件</span><br><span class="line">-rw-r--r--. 1 root root  13980 11月  9 2017 xfs_stage1_5 # xfs 文件系统的定义文件</span><br></pre></td></tr></table></figure>

<p>上面中 ， 最重要的配置文件为 menu.lst 。（Red hat 定义为 /boot/grub.conf) </p>
<h1 id="Grub"><a href="#Grub" class="headerlink" title="Grub"></a>Grub</h1><p>Grub 是目前使用最广泛的 Linux 引导装载程序 ， 有以下几个优点 ： </p>
<ul>
<li>认识与支持较多的文件系统 ， 并且可以使用该grub的主程序直接在文件系统中查询内核文件名。</li>
<li>启动的时候，可以自行编辑与修改启动设置选项，类似bash的命令模式。</li>
<li>可以动态查找配置文件，而不需要修改配置文件后重新安装 grub 。 只需要修改 /boot/grub/menu.lst 后重启生效。</li>
<li>安装在 MBR 的 grub 主要任务是加载内核文件，以让内核能够驱动整个系统的硬件。</li>
<li>grub 与 硬盘分区代号<ul>
<li>(hd0,0)</li>
<li>硬盘代号以 () 括起</li>
<li>硬盘以hd表示 ， 后面会接一组数字</li>
<li>以“查找顺序”作为硬盘的编号，而不是依照硬盘扁平电缆的排序（重点！）</li>
<li>第一个查找的硬盘编号为0号</li>
<li>每块硬盘的第一个分区号为0</li>
</ul>
</li>
<li>第一块硬盘的第一个逻辑分区的boot sector 代号为 (hd0,4)</li>
</ul>
<blockquote>
<p>使用SATA 磁盘，加上使用逻辑分区，Linux当中的文件名为/dev/sda5 (1-4保留给 primary 和 extended 使用)。 对应grub 的磁盘代号为 （hd0，4） ， 注意因为代号是从0开始，所以是4，而不是5.</p>
</blockquote>
<h2 id="menu-lst-配置文件"><a href="#menu-lst-配置文件" class="headerlink" title="menu.lst 配置文件"></a>menu.lst 配置文件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@OrigialCentOS ~]# cat /boot/grub/menu.lst </span><br><span class="line"><span class="meta">#</span><span class="bash"> grub.conf generated by anaconda</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Note that you <span class="keyword">do</span> not have to rerun grub after making changes to this file</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> NOTICE:  You have a /boot partition.  This means that</span></span><br><span class="line"><span class="meta">#</span><span class="bash">          all kernel and initrd paths are relative to /boot/, eg.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">          root (hd0,0)</span></span><br><span class="line"><span class="meta">#</span><span class="bash">          kernel /vmlinuz-version ro root=/dev/sda3</span></span><br><span class="line"><span class="meta">#</span><span class="bash">          initrd /initrd-[generic-]version.img</span></span><br><span class="line"><span class="meta">#</span><span class="bash">boot=/dev/sda</span></span><br><span class="line">default=0 # 默认启动选项，使用第一个启动菜单（title）</span><br><span class="line">timeout=5 # 超时5s</span><br><span class="line">splashimage=(hd0,0)/grub/splash.xpm.gz # 后台图示所在的文件</span><br><span class="line">hiddenmenu # 读秒期间是否显示出完整菜单（默认隐藏）</span><br><span class="line">title CentOS 6 (2.6.32-696.el6.x86_64) # 第一个菜单的内容</span><br><span class="line">	root (hd0,0)</span><br><span class="line">	kernel /vmlinuz-2.6.32-696.el6.x86_64 ro root=UUID=4c170fc7-b150-4dde-8bb4-6987741f6fd1 rd_NO_LUKS rd_NO_LVM LANG=en_US.UTF-8 rd_NO_MD SYSFONT=latarcyrheb-sun16 crashkernel=auto  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM rhgb quiet</span><br><span class="line">	initrd /initramfs-2.6.32-696.el6.x86_64.img</span><br></pre></td></tr></table></figure>

<ul>
<li>default ， 默认从第几个菜单启动， 从0开始。</li>
<li>timeout ，单位为s ， 设置为0表示直接使用 default值进行启动而不读秒；设置为 -1 表示进入菜单不读秒。</li>
<li>title 后面是指定启动的内核文件或者是 boot loader 控制权。</li>
<li>splashimage = (hd0,0)/grub/splash.xpm.gz , 提供后台图示。</li>
<li>hiddenmenu ， 如果要显示完整菜单，则注释掉此行。</li>
<li>指定内核启动<ul>
<li>先指定内核文件放置的分区 ，再读取文件（目录树），最后才加入文件的实际文件名和路径 （ kernel 与 initrd）</li>
<li>root (hd0,0) 代表内核文件放在哪一个分区中<ul>
<li>root 代表 的是内核文件放置的那个分区 ，而不是根目录 。 </li>
</ul>
</li>
<li>kernel kernel /vmlinuz-2.6.32-696.el6.x86_64 ro root=UUID=4c170fc7-b150-4dde-8bb4-6987741f6fd1 rd_NO_LUKS rd_NO_LVM LANG=en_US.UTF-8 rd_NO_MD SYSFONT=latarcyrheb-sun16 crashkernel=auto  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM rhgb quiet<ul>
<li>kernel 接的是内核的文件名 ， 文件名后面接的是内核的参数 。</li>
<li>root=UUID ， 指的是Linux的根目录在哪一个分区的意思。这里采用的UUID来挂载根目录。</li>
<li>rhgb （redhat graphics boot） 为色彩显示 </li>
<li>rd_NO_LVM 禁用LVM</li>
<li>rd_NO_LUKS</li>
<li>SYSFONT</li>
<li>crashkernel</li>
<li>rd_NO_DM</li>
<li>quiet 是 安静模式 （屏幕不会输入内核检测信息）</li>
</ul>
</li>
<li>initrd /initramfs-2.6.32-696.el6.x86_64.img</li>
</ul>
</li>
</ul>
<h2 id="利用-chain-loader的方式转交控制权-，即-双系统的启动方式-。"><a href="#利用-chain-loader的方式转交控制权-，即-双系统的启动方式-。" class="headerlink" title="利用 chain loader的方式转交控制权 ，即 双系统的启动方式 。"></a>利用 chain loader的方式转交控制权 ，即 双系统的启动方式 。</h2><p>chain loader（引导装载程序的连接） 仅是 将控制权交给下一个boot loader而已 。</p>
<ul>
<li>预计要前往的boot sector 所在的分区代号。</li>
<li>chain loader 在的那个分区的boot sector （一般为第一个扇区）</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 应用场景 ， 假设 Windows分区在dev/hda1 ，仅有一块硬盘 </span></span><br><span class="line">title Windows partition</span><br><span class="line">    root (hd0,0)</span><br><span class="line">    # 如果我的/dev/hda5 是安装Linux的分区，不想让Windows识别到这个分区。</span><br><span class="line">    hide (hd0,4)</span><br><span class="line">    # +1 可以认为是第一个扇区 ，即 boot sector</span><br><span class="line">    chainloader +1 </span><br><span class="line">    # 由于Windows的系统盘需要设置为活动（active）状态 ，并且 grub 默认会去检查该分区的文件系统</span><br><span class="line">    makeactive</span><br></pre></td></tr></table></figure>

<h1 id="initrd"><a href="#initrd" class="headerlink" title="initrd"></a>initrd</h1><p>initrd 启动过程中提供所需要的最重要内核模块，以便系统启动过程顺利完成。</p>
<p>而需要 initrd 的原因：</p>
<ul>
<li>内核模块放置于 /lib/modules/$(uname -r)/kernel/当中 ， 这些模块必须要根目录(/)被挂在时才能够被读取。<ul>
<li>如果内核本身不具备磁盘的驱动程序时，时无法挂载根目录的，也没有办法取得驱动程序。</li>
<li>部分服务器的RAID驱动并没有集成到内核中，因此开机过程中会提示没有找到启动目录。</li>
</ul>
</li>
<li>initrd 可以将/lib/modules/…内的启动过程中一定需要的模块打包成一个文件（文件名为initrd）。<ul>
<li>然后再启动时通过主机的int13 硬件功能 将该文件读取出来解压缩，并且initrd在内存内会仿真成根目录 。</li>
<li>由于虚拟文件系统（Initial RAM Disk） 主要包含磁盘与文件系统的模块，所以内核最后才能对实际硬盘进行根目录挂载 操作。  </li>
<li>initrd 内所包含的模块大多都与启动过程有关，而主要以文件系及硬盘模块（usb、SCSI等）为主的。</li>
<li>一般需要initrd的时刻为<ul>
<li>根目录所在的磁盘为 SATA 、 USB | SCSI 等连接接口</li>
<li>根目录所在文件系统为LVM 、 RAID 等特殊格式</li>
<li>根目录所在文件系统为非创痛LINUX “认识” 的文件系统</li>
<li>其他必须在内核加载时系统的模块</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="mkinitrd"><a href="#mkinitrd" class="headerlink" title="mkinitrd"></a>mkinitrd</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> mkinitrd [-v] [--with=模块名称] initrd文件名 内核版本</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -v 显示mkinitrd 运行过程</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --with 模块名称 ： 指模块的名字 ，不需要写完整路径</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 内核版本 ，当前的内核版本就写上 $(uname -r)</span></span><br></pre></td></tr></table></figure>

<h1 id="测试安装-grub"><a href="#测试安装-grub" class="headerlink" title="测试安装 grub"></a>测试安装 grub</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> grub-install [--root-directory=DIR] INSTALL_DEVICE</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --root-directory 为设置实际目录。</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 使用grub-install默认会将grub所有的文件都复制到/boot/grub/*。</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果想要更改目录，则需要使用这个参数。</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> INSTALL_DEVICE 为安装的设备代号</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 案例1 ： 将 grub 安装在目前系统的MBR下面 </span></span><br><span class="line">grub-install /dev/hda</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 案例2 ： /home.test 为独立的 /dev/sdb1 , 将grub安装到 /dev/sdb1</span></span><br><span class="line">grub-install --root-directory=/home.test /dev/sdb1</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">Probing devices to guess BIOS drives. This may take a long time.</span><br><span class="line">Installation finished. No error reported.</span><br><span class="line">This is the contents of the device map /home.test/boot/grub/device.map.</span><br><span class="line">Check if this is correct or not. If any of the lines is incorrect,</span><br><span class="line">fix it and re-run the script `grub-install'.</span><br><span class="line"></span><br><span class="line">(fd0)	/dev/fd0</span><br><span class="line">(hd0)	/dev/sda</span><br><span class="line">(hd1)	/dev/sdb</span><br><span class="line">-</span><br></pre></td></tr></table></figure>

<p>这个在两个硬盘上的第一个分区都装有grub ， 需要从第二块硬盘上面启动的时候，才能生效。</p>
<h2 id="第二块盘上面只有grub，如何快速进入系统"><a href="#第二块盘上面只有grub，如何快速进入系统" class="headerlink" title="第二块盘上面只有grub，如何快速进入系统"></a>第二块盘上面只有grub，如何快速进入系统</h2><p>因为第二快盘只有 grub ，开机启动只有grub shell ，是因为grub没有配置好所导致的问题，现在无法进入系统。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 正常情况下为：</span><br><span class="line"># 从有操作系统的磁盘启动 </span><br><span class="line"># Linux 显示 ： &#x2F;dev&#x2F;sda</span><br><span class="line"># grub 检测显示： hd0</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"># 故障情况</span><br><span class="line"># 修改启动顺序，从一块没有操作系统的磁盘启动</span><br><span class="line"># Linux 显示 ： &#x2F;dev&#x2F;sdb</span><br><span class="line"># grub 显示 ： hd0</span><br><span class="line"># 【正确的系统盘】在grub 显示为 ： hd1</span><br><span class="line"></span><br><span class="line">root (hd1,0)</span><br><span class="line"># kernel 参数中必须挂上root目录，否则系统无法启动 </span><br><span class="line">kernel&#x2F;vmlinuz-2.6.32-696.el6.x86_64 ro root&#x3D;UUID&#x3D;4c170fc7-b150-4dde-8bb4-6987741f6fd1</span><br><span class="line"># 挂载内核模块</span><br><span class="line">initrd &#x2F;initramfs-2.6.32-696.el6.x86_64.img</span><br><span class="line">boot</span><br></pre></td></tr></table></figure>

<h2 id="第二块盘上面的grub配置文件有误，如何快速进入系统"><a href="#第二块盘上面的grub配置文件有误，如何快速进入系统" class="headerlink" title="第二块盘上面的grub配置文件有误，如何快速进入系统"></a>第二块盘上面的grub配置文件有误，如何快速进入系统</h2><p>主要查看两点：</p>
<ul>
<li>路径（root ， kernel ， initrd）是否正确，是否选择有操作系统的boot sector</li>
<li>kernel 中是否有选中root目录。（这个有报错提示的）<ul>
<li>指定root目录三种方法：<ul>
<li>LABEL方法：前提是要设置了label ， root=LABEL=myRoot</li>
<li>UUID方法：前提是要知道UUID，root=UUID=…..</li>
<li>指定分区 ： 前提是要知道根目录在哪一个分区 ,root=/dev/sda3</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul>
<li>《鸟哥的Linux私房菜（第三版）》</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://github.com/r0manj/2018/11/15/%E5%86%85%E6%A0%B8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rohman.Zhu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="R0hman の 实验室">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/15/%E5%86%85%E6%A0%B8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url">内核学习笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-15T22:43:10+08:00">
                2018-11-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>内核即Kernel ， 控制主机的所有硬件并提供系统所有的功能。一般Linux启动过程是利用开机管理程序加载这个内核文件来检测硬件 ， 在内核加载合适的驱动程序后，系统才能够正常启动。</p>
<ul>
<li>内核（Kernel）是一个文件 ，通常放置在 /boot/vmlinuz 中 ，一台Linux中可以有多个内核文件，只是开机的时候仅加载其中一个而已。</li>
<li>内核模块（Kernel Module）通常是一些不常用的类似驱动程序的内容独立出内核，编译成模块，系统在运行过程中加载这个模块得到内核的支持。通常放在 /lib/modules/$(uname -r)/kernel/当中。</li>
<li>内核是通过源代码(Source Code)编译而成的，内核是直接被读入内存当中的。</li>
</ul>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul>
<li>《鸟哥的Linux私房菜（第三版）》 </li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://github.com/r0manj/2018/11/10/%E8%AE%BE%E7%BD%AENTP%E6%9C%8D%E5%8A%A1%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rohman.Zhu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="R0hman の 实验室">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/10/%E8%AE%BE%E7%BD%AENTP%E6%9C%8D%E5%8A%A1%E5%99%A8/" itemprop="url">设置NTP服务器</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-10T22:05:53+08:00">
                2018-11-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>前些日子遇到google-authenticator验证失败，排查过程中发现 静态token能生效，然而动态的token却无法生效，经过一番的排查，锁定为时间问题，服务器上面的时间跟当前的时间偏差竟然达到10分钟的偏移，所以这个是导致动态token验证的主要原因。 因此，今天就记录ntp时间同步的相关操作，因为集群中没有设置ntp服务器（非常有必要建立NTP服务器），所以连接的NTP服务器，我这里选用 阿里云 的时间服务器。</p>
<ul>
<li>NTP = 网络时间协议(Network Time Protocol)，它是用来同步网络中各个计算机的时间的协议</li>
</ul>
<h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><ul>
<li>OS：CentOS 6.9</li>
</ul>
<h1 id="操作实例"><a href="#操作实例" class="headerlink" title="操作实例"></a>操作实例</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装ntp服务</span></span><br><span class="line">yum install ntp -y</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 设置 ntp 的主节点</span></span><br><span class="line">vim /etc/ntp.conf</span><br><span class="line"><span class="meta">#</span><span class="bash">---ntp.conf---<span class="comment">#</span></span></span><br><span class="line">server ntp1.aliyun.com</span><br><span class="line">server ntp2.aliyun.com</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ntp 用到的端口是UDP 123 ， 因此防火墙拦截会导致ntp无法使用</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 开启服务后，可以用netstat看该端口是否有运行</span></span><br><span class="line">netstat -lntup | grep 123</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看ntp运行状态</span></span><br><span class="line">watch ntpq -p</span><br><span class="line"><span class="meta">#</span><span class="bash"> 一般需要等待20分钟左右，我这里6分钟就生效了。</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 当服务器地址前面有 “*” 时 ， 表示正在使用该服务器做时间同步</span></span><br><span class="line">ntpstat</span><br></pre></td></tr></table></figure>

<h1 id="知识梳理"><a href="#知识梳理" class="headerlink" title="知识梳理"></a>知识梳理</h1><h2 id="标准时间"><a href="#标准时间" class="headerlink" title="标准时间"></a>标准时间</h2><p>1、美国中部时间：Central Standard Time (USA) UT-6:00<br>2、澳大利亚中部时间：Central Standard Time (Australia) UT+9:30<br>3、中国标准时间：China Standard Time UT+8:00<br>4、古巴标准时间：Cuba Standard Time UT-4:00</p>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul>
<li>设置实例 ：<a href="https://www.cnblogs.com/quchunhui/p/7658853.html" target="_blank" rel="noopener">https://www.cnblogs.com/quchunhui/p/7658853.html</a></li>
<li>设置实例 ：<a href="https://blog.csdn.net/caodongfang126/article/details/79670636" target="_blank" rel="noopener">https://blog.csdn.net/caodongfang126/article/details/79670636</a></li>
<li>NTP服务器官网 ：<a href="http://www.pool.ntp.org/" target="_blank" rel="noopener">http://www.pool.ntp.org/</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/7/">&lt;i class&#x3D;&quot;fa fa-angle-left&quot;&gt;&lt;&#x2F;i&gt;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><a class="extend next" rel="next" href="/page/9/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Rohman.Zhu</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">185</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">58</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Rohman.Zhu</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count"></span>
  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共字</span>
</div>

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
